
-- OPB - projekt SQL shema


CREATE TABLE festival (
	ime TEXT PRIMARY KEY,
	leto INTEGER PRIMARY KEY,
	kraj TEXT PRIMARY KEY,
	zacetek DATE NOT NULL,
	konec DATE NOT NULL
);

CREATE TABLE sponzor (
	ime TEXT PRIMARY KEY,
	dr탑ava TEXT REFERENCES dr탑ava(ime)
);

CREATE TABLE drzava (
	ime TEXT PRIMARY KEY,
	kontinent TEXT NOT NULL
);

CREATE TABLE prodajalec_vstopnic (
	ime TEXT PRIMARY KEY,
	naslov TEXT,
	telefon INTEGER,
	homepage TEXT
);

CREATE TABLE uporabnik (
	ip MACADDR PRIMARY KEY
);

CREATE TABLE izvajalec (
	id SERIAL PRIMARY KEY,
	ime TEXT NOT NULL,
	link TEXT
);

CREATE TABLE zvrst (
	ime TEXT PRIMARY KEY
);



CREATE TABLE sponzorira (
	id SERIAL PRIMARY KEY,
	vrednost INTEGER NOT NULL,
	festival TEXT REFERENCES festival(ime),
	leto INTEGER REFERENCES festival(leto),
	kraj TEXT REFERENCES festival(kraj),
);

CREATE TABLE prodaja (
	ime_prodajalec TEXT REFERENCES prodajalec_vstopnic(ime),
	ime_dr탑ava TEXT REFERENCES dr탑ava(ime),
	ime_festival TEXT REFERENCES festival(ime),
	kraj_festival TEXT REFERENCES festival(kraj),
	leto_festival TEXT REFERENCES festival(leto),
	cena_vstopnica INTEGER,
	cena_kamp INTEGER

);

CREATE TABLE ocenjuje (
	ip_uporabnik MACADDR REFERENCES uporabnik(ip)
	ocena INTEGER NOT NULL
	ime_festival TEXT REFERENCES festival(ime),
	kraj_festival TEXT REFERENCES festival(kraj),
	leto_festival TEXT REFERENCES festival(leto)
);

CREATE TABLE je_v (
	festival TEXT REFERENCES festival(ime, leto, kraj),
	drzava TEXT REFERENCES drzava(ime),
	PRIMARY KEY (festival, drzava)
);

CREATE TABLE je (
	izvajalec TEXT REFERENCES izvajalec(id),
	zvrst TEXT REFERENCES zvrst(ime),
	PRIMARY KEY (izvajalec, zvrst)
);

CREATE TABLE igra (
	izvajalec TEXT REFERENCES izvajalec(id),
	festival TEXT REFERENCES festival(ime, leto, kraj),
	PRIMARY KEY (izvajalec, festival)
);
